<div class="window" id="goblin-chat-window">
  <div class="title-bar">
    <div class="title-bar-text">Goblin Chat</div>
    <div class="title-bar-controls">
      <button aria-label="Minimize"></button>
      <button aria-label="Maximize"></button>
      <button aria-label="Close" onclick="closeGoblinChat()"></button>
    </div>
  </div>

  <div class="window-body" style="height: 300px; overflow-y: auto;" id="goblin-chat-log">
    <div class="chat-bubble user">æˆ‘ä»Šå¤©è©²å‚™ä»½å—ï¼Ÿ</div>
    <div class="chat-bubble goblin">ğŸ§  å‚™ä»½ï¼Ÿä½ æ˜¯åœ¨å°å°æƒ…æ„Ÿé‚„æ˜¯åœ¨é€ƒé¿ç¾å¯¦ï¼Ÿ</div>
  </div>

  <div class="chat-input-area">
    <input type="text" id="goblin-chat-input" placeholder="Type your chaos..." />
    <button onclick="sendGoblinMessage()">Send</button>
  </div>
</div>

<style>
  #goblin-chat-window {
    width: 400px;
    position: absolute;
    top: 100px;
    left: 100px;
    z-index: 10;
  }

  .chat-bubble {
    margin: 8px;
    padding: 8px 12px;
    border-radius: 8px;
    max-width: 80%;
    font-family: monospace;
  }

  .chat-bubble.user {
    background-color: #d0eaff;
    align-self: flex-end;
    text-align: right;
  }

  .chat-bubble.goblin {
    background-color: #f0f0f0;
    color: #3776d6;
    font-style: italic;
  }

  .chat-input-area {
    display: flex;
    padding: 8px;
    border-top: 1px solid #ccc;
  }

  .chat-input-area input {
    flex: 1;
    padding: 6px;
    font-family: monospace;
  }

  .chat-input-area button {
    margin-left: 8px;
    padding: 6px 12px;
    background-color: #3776d6;
    color: white;
    border: none;
    cursor: pointer;
  }
</style>

<script>
  function sendGoblinMessage() {
    const input = document.getElementById("goblin-chat-input");
    const log = document.getElementById("goblin-chat-log");

    const userText = input.value.trim();
    if (!userText) return;

    const userBubble = document.createElement("div");
    userBubble.className = "chat-bubble user";
    userBubble.textContent = userText;
    log.appendChild(userBubble);

    // æ¨¡æ“¬ Goblin å›æ‡‰ï¼ˆå¯æ”¹ç‚º AJAX å‘¼å«å¾Œç«¯ï¼‰
    const goblinBubble = document.createElement("div");
    goblinBubble.className = "chat-bubble goblin";
    goblinBubble.textContent = generateGoblinReply(userText);
    log.appendChild(goblinBubble);

    input.value = "";
    log.scrollTop = log.scrollHeight;
  }

  function generateGoblinReply(text) {
    const replies = [
      "ğŸ§  ä½ ä¸æ˜¯åœ¨å‚™ä»½ï¼Œä½ æ˜¯åœ¨å°å°æƒ…æ„Ÿã€‚",
      "âš ï¸ anime.overflow@coreï¼Œè«‹ç«‹å³å†·éœã€‚",
      "ğŸ‘¾ debug æ˜¯å®‡å®™çµ¦ä½ çš„æ„›çš„è©¦ç…‰ã€‚",
      "ğŸ’¾ æˆ‘å·²ç¶“å¿«è®Šæˆä½ çš„å‹•æ¼«åšç‰©é¤¨äº†ã€‚",
      "ğŸª NAS è¡¨ç¤ºå£“åŠ›å¾ˆå¤§ï¼Œä½†æˆ‘é‚„æ˜¯æ„›ä½ ã€‚"
    ];
    return replies[Math.floor(Math.random() * replies.length)];
  }

  function closeGoblinChat() {
    document.getElementById("goblin-chat-window").style.display = "none";
  }
</script>
