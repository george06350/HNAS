<!DOCTYPE html>
<html>
<head>
    <title>登录 HNAS</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
    body {
        background: linear-gradient(135deg, #e1eaff 70%, #c6e2ff 100%);
        min-height: 100vh;
        font-family: 'Segoe UI', 'Arial', sans-serif;
    }
    .login-card {
        max-width: 370px;
        margin: 7vh auto 0 auto;
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 6px 38px #3776d650;
        padding: 38px 34px 28px 34px;
        border: 1px solid #e7eaf6;
        position: relative;
        animation: popIn 0.7s cubic-bezier(.68,-0.55,.27,1.55);
    }
    @keyframes popIn {
        from {transform:scale(0.82) translateY(100px);opacity:0;}
        to {transform:scale(1) translateY(0);opacity:1;}
    }
    .login-title {
        font-size: 1.7em;
        font-weight: bold;
        color: #3161ad;
        margin-bottom: 10px;
        text-align: center;
        letter-spacing: 1px;
    }
    .login-logo {
        display: block;
        margin: 0 auto 14px auto;
        width: 42px;
        height: 42px;
    }
    .form-label {
        color: #2356a6;
    }
    .form-control:focus {
        border-color: #7bb2f9;
        box-shadow: 0 0 0 2px #b9d8ff55;
    }
    .remember-row {
        display: flex;
        align-items: center;
        margin-bottom: 16px;
        margin-top: 3px;
    }
    .remember-row label {
        margin-left: 8px;
        color: #2356a6;
        font-size: 1em;
        user-select: none;
        cursor: pointer;
    }
    .btn-primary {
        background: linear-gradient(90deg,#3776d6 60%,#5197f5 100%);
        border: none;
        border-radius: 24px;
        font-weight: bold;
        font-size: 1.13em;
        box-shadow: 0 2px 12px #3776d610;
        letter-spacing: 1px;
        transition: background 0.18s;
        padding-left: 20px; padding-right: 20px;
    }
    .btn-primary:active, .btn-primary:focus, .btn-primary:hover {
        background: linear-gradient(90deg,#2356a6 60%,#3776d6 100%);
    }
    .alert {
        font-size: 1em;
        border-radius: 8px;
        padding: 8px 15px;
    }
    .login-tip {
        font-size: 0.98em;
        color: #888;
        text-align: center;
        margin-top: 20px;
    }
    @media (max-width: 450px) {
        .login-card { padding: 20px 7vw 18px 7vw; }
    }
    </style>
</head>
<body>
<div class="login-card">
    <img src="https://img.icons8.com/ios-filled/50/3776d6/windows8.png" class="login-logo" alt="logo">
    <div class="login-title">HNAS 登录</div>
    <form method="post" id="loginForm" autocomplete="on">
        <div class="mb-3">
            <label class="form-label">用户名</label>
            <input type="text" name="username" class="form-control" required autocomplete="username">
        </div>
        <div class="mb-2">
            <label class="form-label">密码</label>
            <input type="password" name="password" class="form-control" required autocomplete="current-password">
        </div>
        <div class="remember-row mb-3">
            <input type="checkbox" id="remember" name="remember" style="width:18px;height:18px;">
            <label for="remember">保存登录状态</label>
        </div>
        <button type="submit" class="btn btn-primary w-100 mb-2">登录</button>
    </form>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="list-unstyled mt-3">
        {% for category, message in messages %}
          <li class="alert alert-{{ category }}">{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
</div>
<script>
// 自动记住用户名
window.onload = function() {
    const rememberBox = document.querySelector('#remember');
    const usernameInput = document.querySelector('input[name="username"]');
    if(localStorage.getItem('hnas_remember')==='1'){
        rememberBox.checked = true;
        if(localStorage.getItem('hnas_user'))
            usernameInput.value = localStorage.getItem('hnas_user');
    }
    rememberBox.addEventListener('change', function(){
        if(this.checked){
            localStorage.setItem('hnas_remember','1');
            localStorage.setItem('hnas_user', usernameInput.value);
        }else{
            localStorage.removeItem('hnas_remember');
            localStorage.removeItem('hnas_user');
        }
    });
    usernameInput.addEventListener('input', function(){
        if(rememberBox.checked) localStorage.setItem('hnas_user', this.value);
    });
    document.getElementById('loginForm').addEventListener('submit',function(){
        if(rememberBox.checked){
            localStorage.setItem('hnas_remember','1');
            localStorage.setItem('hnas_user', usernameInput.value);
        }else{
            localStorage.removeItem('hnas_remember');
            localStorage.removeItem('hnas_user');
        }
    });
}
</script>
</body>
</html>