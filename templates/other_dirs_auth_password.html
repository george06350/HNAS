<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>其他目录访问认证</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background:#232738; color:#eaf6ff; }
        .center-card { max-width:340px; margin:90px auto; background:#242a36; border-radius:12px; padding:38px 32px 32px 32px; box-shadow:0 2px 18px #0007;}
        .title {font-size:1.3em; color:#5cbaff; font-weight:600;}
    </style>
</head>
<body>
<div class="center-card">
    <div class="title mb-3">其他目录认证</div>
    <form id="authForm">
        <div class="mb-3">
            <input type="password" class="form-control" name="password" placeholder="请输入当前账号密码" required>
        </div>
        <button class="btn btn-primary w-100" type="submit">确认</button>
        <div id="authMsg" class="text-danger mt-3" style="display:none;"></div>
    </form>
</div>
<script>
document.getElementById('authForm').onsubmit = function(e){
    e.preventDefault();
    let fd = new FormData(this);
    fetch('/other_dirs_auth_check', {method:'POST', body:fd}).then(r=>r.json()).then(data=>{
        if(data.ok){
            // 认证后直接进入/data目录
            window.location.href = '/filemanager_inner/';
        }else{
            document.getElementById('authMsg').innerText = data.msg || '认证失败';
            document.getElementById('authMsg').style.display = '';
        }
    });
};
</script>
</body>
</html>